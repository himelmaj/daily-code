---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import removeDashes from "@/utils/remove-dashes.ts";
import ArrowLeft from "@/components/ArrowLeft.astro";

export async function getStaticPaths() {
    const days = await getCollection("days");
    
    return days.map((day) => ({
        params: { slug: day.slug },
        props: { day },
    }));
}

const { day } = Astro.props;
const { Content } = await day.render();
const displaySlug = removeDashes(day.slug);
---

<Layout title={displaySlug.toUpperCase() + " | Daily Code"}>
    <header class="border-zinc-800 border-b p-2 text-xs text-neutral-500 flex justify-between items-center">
        <a 
            href="/" 
            class="text-sm text-neutral-500 hover:text-white transition-colors w-fit"
        >
            <ArrowLeft width="20" height="20" />
        </a>
        
        <h1 class="uppercase font-pirata-one text-white text-sm">
            Daily Code
        </h1>
        
        <span class="uppercase">
            {displaySlug}
        </span>
    </header>
    
    <section class="container mx-auto max-w-3xl px-4 py-8 text-xs">
        <h1 class="text-3xl font-bold text-white uppercase font-pirata-one mb-6">
            {day.data.title}
        </h1>
        
        <article class="mdx-content">
            <Content />
        </article>
    </section>
</Layout>

<style is:global>
    .mdx-content {
        color: #d4d4d8;
    }

    /* Títulos */
    .mdx-content h1 {
        font-size: 1rem;
        font-weight: 700;
        color: white;
        margin-top: 2rem;
        margin-bottom: 1rem;
    }
    
    .mdx-content h2 {
        font-size: 1rem;
        font-weight: 600;
        color: white;
        margin-top: 1rem;
        margin-bottom: 0.75rem;
    }
    
    .mdx-content h3 {
        font-size: 1rem;
        font-weight: 600;
        color: #e4e4e7;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
    }
    
    /* Párrafos */
    .mdx-content p {
        color: #d4d4d8;
        line-height: 1.75;
        margin-bottom: 1rem;
    }
    
    /* Código inline */
    .mdx-content :not(pre) > code {
        background-color: #27272a;
        color: #34d399;
        padding: 0.125rem 0.375rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
    }
    
    /* Bloques de código */
    .mdx-content pre {
        background-color: #18181b;
        border: 1px solid #27272a;
        border-radius: 0.5rem;
        padding: 1rem;
        overflow-x: auto;
        margin-bottom: 1rem;
    }
    
    .mdx-content pre code {
        background-color: transparent;
        color: #d4d4d8;
        padding: 0;
    }
    
    /* Listas */
    .mdx-content ul, 
    .mdx-content ol {
        color: #d4d4d8;
        margin-bottom: 1rem;
        margin-left: 1.5rem;
    }
    
    .mdx-content li {
        margin-bottom: 0.5rem;
    }
    
    /* Enlaces */
    .mdx-content a {
        color: #34d399;
        text-decoration: underline;
        transition: color 0.2s;
    }
    
    .mdx-content a:hover {
        color: #6ee7b7;
    }
    
    /* Separadores */
    .mdx-content hr {
        border-color: #27272a;
        margin-top: 2rem;
        margin-bottom: 2rem;
    }
    
    /* Blockquotes */
    .mdx-content blockquote {
        border-left: 4px solid #10b981;
        padding-left: 1rem;
        font-style: italic;
        color: #a1a1aa;
        margin-top: 1rem;
        margin-bottom: 1rem;
    }

    /* Strong/Bold */
    .mdx-content strong {
        font-weight: 700;
        color: white;
    }

    /* Emphasis/Italic */
    .mdx-content em {
        font-style: italic;
    }
</style>